(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{453:function(a,e,n){"use strict";n.r(e);var s=n(65),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"operaciones"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operaciones"}},[a._v("#")]),a._v(" Operaciones")]),a._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#conceptos-basicos"}},[a._v("Conceptos Básicos")])]),n("li",[n("a",{attrs:{href:"#actualizacion-de-datos-luego-de-presionar-una-operacion"}},[a._v("Actualización de Datos Luego de Presionar una Operación")])]),n("li",[n("a",{attrs:{href:"#operaciones-que-requieren-recarga-de-datos-en-el-panel-invocador"}},[a._v("Operaciones que requieren recarga de datos en el panel invocador")])]),n("li",[n("a",{attrs:{href:"#operaciones-con-confirmacion"}},[a._v("Operaciones con Confirmación")])]),n("li",[n("a",{attrs:{href:"#preconfirmacion"}},[a._v("Preconfirmación")])]),n("li",[n("a",{attrs:{href:"#tecla-asociada"}},[a._v("Tecla Asociada")])]),n("li",[n("a",{attrs:{href:"#definiendo-si-esta-visible-y-habilitada-en-tiempo-de-ejecucion"}},[a._v("Definiendo si está Visible y Habilitada en Tiempo de Ejecución")])]),n("li",[n("a",{attrs:{href:"#nombre-asociado"}},[a._v("Nombre Asociado")])]),n("li",[n("a",{attrs:{href:"#operaciones-que-abren-prompts"}},[a._v("Operaciones que abren Prompts")])])])]),n("p"),a._v(" "),n("h2",{attrs:{id:"conceptos-basicos"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#conceptos-basicos"}},[a._v("#")]),a._v(" Conceptos Básicos")]),a._v(" "),n("p",[a._v("Las páginas Web por lo general se componen de un formulario y botones para realizar\noperaciones. En la sección anterior exploramos los elementos básicos que ofrece el\ndiseñador para definir el formulario, aquí analizaremos la definición de operaciones.")]),a._v(" "),n("p",[a._v("Las operaciones determinan las acciones que el usuario puede hacer sobre la página. Al\ngenerar la página Web, cada operación se representará como un botón que puede presionar\nel usuario. Las operaciones se definen en el elemento operations dentro de web-ui. A continuación se muestra un ejemplo de una página Web que define la operación “Confirmar”\ny “Cancelar”:")]),a._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("object-definition")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("libraryName")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Dlya.Basic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("libraryVersion")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("1.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("designer")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("WebUI"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("web-ui")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("title")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("País"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("other"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("form")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("field")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("caption")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Código"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("data")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[a._v("&amp;")]),a._v("Cod"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("readOnly")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("allowNull")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("line-break")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("field")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("caption")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Nombre"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("data")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[a._v("&amp;")]),a._v("Nom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("readOnly")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("allowNull")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("form")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("operations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("operation")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("caption")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Confirmar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("validateData")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("true"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("operation")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("caption")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Cancelar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("validateData")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("operations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("web-ui")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("object-definition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("p",[a._v("La definición anterior contiene un campo para el código, otro para el nombre, una operación\npara confirmar la creación del país, y otra para cancelar el ingreso.")]),a._v(" "),n("p",[a._v("Como se puede observar, por cada operación se debe utilizar un elemento operation que\ndebe contener en el atributo caption la etiqueta asociada al botón. Adicionalmente, el\nejemplo contiene el atributo validateData que indica si la operación requiriere validación de\ndatos o no.")]),a._v(" "),n("p",[a._v("Al ejecutar este objeto, si se presiona la operación “Confirmar”, y el código o nombre están\nvacíos, se mostrará un error y no se ejecutará la operación. Esto se debe a que los campos\nno permiten valores nulos y la operación “Confirmar” realiza validación de datos. Por otro\nlado, al presionar cancelar no se validan los datos ingresados porque validateDate tiene el\nvalor false. El valor por defecto de validateData es false, por lo tanto, si no se especifica el\natributo no se realizan validaciones. Para obtener más información con respecto a las\nvalidaciones se recomienda leer la sección 11.0 Validaciones.")]),a._v(" "),n("p",[a._v("Hasta ahora hemos definido la apariencia visual de la página Web, y algunas validaciones\nsencillas, sin embargo aún nos está faltando definir el código que se ejecuta al presionar los\nbotones de las operaciones. Cuando se genera la definición el diseñador crea una subrutina\npor operación. Dentro de estas subrutinas debemos escribir el código asociado a la\noperación, y el diseñador se encarga de invocar a la subrutina cuando se presiona el botón\ncorrespondiente.")]),a._v(" "),n("p",[a._v("En el ejemplo anterior la subrutina asociada a la operación “Confirmar” se define de esta\nforma:")]),a._v(" "),n("div",{staticClass:"language-genexus line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("    Sub 'GU: Op -> Confirmar (Click)' //$ ...\n        // PARA HACER: Ingrese el código que se ejecuta al realizar la operación\n    EndSub // 'GU: Op -> Confirmar (Click)' \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("p",[a._v("Dentro de esta subrutina debemos poner el código asociado a la operación “Confirmar”, por\nejemplo, una invocación a un procedimiento para crear un registro en la tabla de países.")]),a._v(" "),n("p",[a._v("Observar que la subrutina es de usuario (tiene prefijo “GU”), por lo tanto, al volver a generar\nla definición no se modificará el código escrito en la subrutina.")]),a._v(" "),n("h2",{attrs:{id:"actualizacion-de-datos-luego-de-presionar-una-operacion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#actualizacion-de-datos-luego-de-presionar-una-operacion"}},[a._v("#")]),a._v(" Actualización de Datos Luego de Presionar una Operación")]),a._v(" "),n("p",[a._v("Cuando la página contiene grillas se debe tener precaución al modificar la base de datos\ndesde las operaciones, porque si modificamos alguna tabla asociada a una grilla, ésta no se\nactualizará a menos que lo indiquemos. Es decir, si tenemos una grilla que muestra la lista\nde países y desde una operación agregamos un registro en la tabla de países, no se verá el\nnuevo registro en la grilla a menos que asignemos el valor true al atributo autoRefresh en el\nelemento operation de la operación. Esta asignación provoca que, luego de ejecutarse la\noperación, se vuelva a ejecutar el código que carga los datos en la grilla. Si no se asigna este\nvalor al atributo autoRefresh, no se reflejarán los cambios realizados en las grillas.")]),a._v(" "),n("p",[a._v("Al utilizar la opción autoRefresh se refrescan los datos de las grillas que estén dentro del\nalcance de la operación. El alcance es el conjunto de elementos que puede afectar la\noperación. Como veremos más adelante se pueden definir categorías y subcategorías, y\noperaciones a nivel de una categoría o subcategoría; en estas situaciones el alcance es la\ncategoría o subcategoría, y sólo se refrescarán las grillas que estén definidas dentro de éstas.\nTambién se pueden definir operaciones a nivel de una grilla, y aquí sólo se refrescará la grilla\na la cual están asociadas.")]),a._v(" "),n("p",[a._v("El atributo autoRefresh brinda un mecanismo sencillo para actualizar grillas que estén dentro\ndel mismo alcance de la operación, lo cual puede ser suficiente para la mayoría de los casos.\nSin embargo, para darle mayor flexibilidad al esquema también se proporciona el atributo\nrefreshGrids, el cual permite indicar de forma explícita que grillas se actualizan (en caso que\nsea más de una se deben separar con comas), por ejemplo, si se necesitan actualizar las\ngrillas grdClientes y grdPaises se debe asignar el valor “grdClientes, grdPaises”.")]),a._v(" "),n("p",[a._v("Por defecto no se refrescan las grillas para evitar introducir carga innecesaria en la base de\ndatos y mejorar el rendimiento global de la aplicación. Por este motivo, cada vez que sea\nnecesario volver a cargar grillas es preciso indicarlo explícitamente.")]),a._v(" "),n("p",[a._v("El atributo autoRefresh no sólo se aplica en las grillas, sino que se utiliza también para\nindicar si es necesario actualizar los datos de la página estamos volviendo de otra.\nSupongamos que estamos en la página A y creamos una operación que nos hace ir a la\npágina B. Luego dentro de la página B apretamos una operación que nos hace volver a la\npágina A. Al volver, si la operación que nos hizo ir a la página B tiene el valor true en el atributo\nautoRefresh se vuelven a cargar las grillas de la página A. La implementación de estos\nesquemas de navegación se analizará en la sección 8.0 Navegación.")]),a._v(" "),n("h2",{attrs:{id:"operaciones-que-requieren-recarga-de-datos-en-el-panel-invocador"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operaciones-que-requieren-recarga-de-datos-en-el-panel-invocador"}},[a._v("#")]),a._v(" Operaciones que requieren recarga de datos en el panel invocador")]),a._v(" "),n("p",[a._v("En ocasiones se puede requerir que al realizar una modificación en los datos de un panel, se\nactualicen los datos del panel invocador. Por ejemplo, si estamos en un panel que nos permite visualizar y modificar las comisiones de un préstamo, pero solo si se modifican\ndebemos actualizar los valores en el panel que invoca al de comisiones, debemos:")]),a._v(" "),n("ul",[n("li",[a._v("Agregar a las operaciones que nos permiten modificar datos de las comisiones el\natributo clientRefreshEvents:\n"),n("code",[a._v('xml <operation caption="Agregar" clientRefreshEvents="CambioComisión" />')])]),a._v(" "),n("li",[a._v("Incluir en el web-ui del panel que invoca al de comisiones el atributo clientRefreshIf\n"),n("code",[a._v('xml <web-ui title="Persona" clientRefreshIf="CambioComisión" class="other">')])])]),a._v(" "),n("h2",{attrs:{id:"operaciones-con-confirmacion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operaciones-con-confirmacion"}},[a._v("#")]),a._v(" Operaciones con Confirmación")]),a._v(" "),n("p",[a._v("Las operaciones pueden ser definidas con confirmación asignando el valor true al atributo\nconfirmation. Al definir una operación con confirmación, cuando el usuario realice la\noperación se le pedirá una confirmación, y sólo se ejecutará el código asociado a la misma\nsi la confirma. A continuación se muestra un ejemplo de una operación con confirmación")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v('    ``` xml\n        <operation caption="Borrar" confirmation="true" /> \n    ```\n')])])]),n("p",[a._v("El uso de confirmaciones ayuda a evitar que el usuario realice acciones irreversibles por\naccidente. Se recomienda pedir confirmaciones en operaciones para borrar y cualquier otra\nque pueda producir un impacto importante en el sistema y su mal uso pueda provocar daños\ndifíciles de reparar")]),a._v(" "),n("img",{staticClass:"center",attrs:{src:a.$withBase("/img/07-1.png")}}),a._v(" "),n("h2",{attrs:{id:"preconfirmacion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#preconfirmacion"}},[a._v("#")]),a._v(" Preconfirmación")]),a._v(" "),n("p",[a._v("En algunas situaciones puede ser necesario determinar si se va a pedir confirmación en\ntiempo de ejecución. Por ejemplo, si se tiene una operación que debita un montó de una\ncuenta se podría pedir confirmación cuando el saldo va a quedar negativo.")]),a._v(" "),n("p",[a._v("Para resolver estas situaciones se debe utilizar el atributo generatePreConfirmation. Al\nasignar true a este atributo se genera una subrutina en donde podemos evaluar si es\nnecesaria una confirmación. En el ejemplo anterior si se asigna true a\ngeneratePreConfirmation se genera la siguiente subrutina:")]),a._v(" "),n("div",{staticClass:"language-genexus line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("    Sub 'GU: Op -> Transferir (Pre-Confirmation)' //$ ... \n        // PARA HACER: Ingrese el código que verifica si es necesaria una\n        // confirmación para la operación. La variable\n        &GP_Op_Confirmada tendrá\n        // el valor 'N' en caso de no haberse mostrado la confirmación aún, y 'S'\n        // en caso que el usuario ya haya confirmado la operación\n        // OBS1: Para evitar que se muestre la confirmación al usuario debe asignar // el valor 'N' a la variable\n        &GP_Op_Transferir_MostrarConf, por defecto es // 'S'\n        // OBS2: Para cambiar el mensaje de la confirmación debe asignarse el nuevo\n        // texto a la variable &GP_Op_Transferir_TextoConf\n    EndSub // 'GU: Op -> Transferir (Pre-Confirmation)'\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("p",[a._v("Dentro de esta subrutina podemos escribir código que se ejecuta antes de mostrarle\nconfirmación. Adicionalmente, al generar una operación con preconfirmación se crean dos\nvariables que nos permiten controlar si mostramos o no la confirmación (variable\nGP_Op_Transferir_MostrarConf) y el texto de la confirmación (variable\nGP_Op_Transferir_TextoConf). En los comentarios de la subrutina generada se explica cómo\nutilizarla, cómo se puede observar en caso que no queramos mostrar una confirmación\npodemos asignarle “N” a la variable GP_Op_Transferir_MostrarConf.")]),a._v(" "),n("p",[a._v("La subrutina de preconfirmación se ejecuta antes de mostrar una confirmación y también\nluego de confirmarla (pero antes de ejecutar la operación). Es decir, cuando el usuario\nconfirma la operación se vuelve a ejecutar la subrutina de preconfirmación y luego se ejecuta\nla operación. Este comportamiento está definido así por seguridad, ya que, un uso común de\nla subrutina de preconfirmación es para hacer validaciones antes de mostrarle una\nconfirmación, y durante la confirmación el usuario podría hacer cambios en la página. Por lo\ntanto, es necesario volver a hacer las validaciones luego de la confirmación y así evitar que\nse ejecute la operación en una situación no permitida. Sin embargo, a pesar que la subrutina\nde preconfirmación se vuelva a ejecutar, no se mostrará nuevamente la confirmación. Se\nofrece la variable GP_Op_Confirmada para poder conocer si ya se realizó la confirmación o\nno.")]),a._v(" "),n("p",[a._v("La subrutina de preconfirmación sirve principalmente para resolver tres situaciones:")]),a._v(" "),n("ul",[n("li",[a._v("Hacer validaciones antes de mostrar una confirmación: Por ejemplo, podríamos\nvalidar los datos que ingresó el usuario y si detectamos que no son correctos\npodríamos mostrarle un error antes de pedir la confirmación. Si se reporta un error\ndentro de la subrutina de pedido de confirmación, se muestra el error y no se pide\nconfirmación ni se ejecuta la operación. En caso que no tuviéramos este mecanismo\ntendríamos que hacer la validación dentro de la subrutina asociada a la operación, y\nel usuario tendría que confirmar la operación para ver el error.\nEn el siguiente ejemplo se reporta un error si la cuenta de origen no tiene fondos:")])]),a._v(" "),n("div",{staticClass:"language-genexus line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("    Sub 'GU: Op -> Transferir (Pre-Confirmation)' //$ ...\n        // Verifica si hay fondos en la cuenta de origen\n        Call(PVerificarFondos, &CuentaOrigen, &CuentaDestino, &TieneFondos)\n        If (&TieneFondos = \"N\")\n            // No hay fondos, reporta un error\n            &GP_Mensaje = Udp(PFRRepMsg, \"La cuenta de origen no tiene fondos suficientes.\", \"E\")\n            Do 'GP: Reportar mensaje'\n        EndIf\n    EndSub // 'GU: Op -> Transferir (Pre-Confirmation)'\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br")])]),n("ul",[n("li",[a._v("Determinar si mostramos una confirmación en tiempo de ejecución: En la subrutina\nde preconfirmación podemos escribir código para determinar si mostramos la\nconfirmación según alguna situación particular utilizando la variable\nGP_Op_"),n("code",[a._v("<nombre de la operación>")]),a._v("_MostrarConf). En el ejemplo de la transferencia\nde una cuenta a otra, podríamos utilizar este mecanismo para pedir una confirmación\núnicamente si no hay suficientes fondos en la cuenta de origen y va a quedar con un\nsaldo sobregirado:")])]),a._v(" "),n("div",{staticClass:"language-genexus line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("    Sub 'GU: Op -> Transferir (Pre-Confirmation)' //$ ...\n        // Verifica si hay fondos en la cuenta de origen\n        Call(PVerificarFondos, &CuentaOrigen, &CuentaDestino, &TieneFondos)\n        If (&TieneFondos = \"N\")\n            // No hay fondos, reporta un error\n            &GP_Mensaje = Udp(PFRRepMsg, \"La cuenta de origen no tiene fondos suficientes.\", \"E\")\n            Do 'GP: Reportar mensaje'\n        EndIf\n    EndSub // 'GU: Op -> Transferir (Pre-Confirmation)'\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br")])]),n("ul",[n("li",[a._v("Reportar información adicional: Otra situación podría ser la siguiente: queremos pedir\nsiempre confirmación, pero además queremos notificar al usuario cuando la cuenta\nse va a quedar sin fondos. Una posibilidad podría ser modificar el texto de\nconfirmación cuando no tiene fondos y así advertirle al usuario del caso. Sin embargo,\ncon esta solución es muy probable que el usuario no perciba que la cuenta no tiene\nfondos porque va a estar acostumbrado a confirmar la operación y no va a leer el\nmensaje. Una solución más adecuada sería generar una advertencia que indique que\nla cuenta no tiene fondos, ya que las advertencias se muestran separadas del texto\nde confirmación y es más probable que el usuario las perciba.")])]),a._v(" "),n("p",[a._v("En el siguiente ejemplo se muestra como implementar esta solución:")]),a._v(" "),n("div",{staticClass:"language-genexus line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('    Sub \'GU: Op -> Transferir (Pre-Confirmation)\' //$ ...\n    // Verifica que aún no se confirmó, para no mostrar la advertencia\n    // luego que el usuario confirmó la operación\n        If (&GP_Op_Confirmada = "N")\n            // Verifica si hay fondos en la cuenta de origen\n            Call(PVerificarFondos, &CuentaOrigen, &CuentaDestino,&TieneFondos)\n            If (&TieneFondos = "N")\n                // No hay fondos, reporta una advertencia \n                &GP_Mensaje = Udp(PFRRepMsg, "La cuenta de origen no tiene fondos suficientes.", "W")\n                Do \'GP: Reportar mensaje\'\n            EndIf\n        EndIf\n    EndSub // \'GU: Op -> Transferir (Pre-Confirmation)\' \n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("img",{staticClass:"center",attrs:{src:a.$withBase("/img/08.png")}}),a._v(" "),n("p",[a._v("Para más información sobre reporte de mensajes ver sección 9.0 Reporte de\nerrores/advertencias.")]),a._v(" "),n("h2",{attrs:{id:"tecla-asociada"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tecla-asociada"}},[a._v("#")]),a._v(" Tecla Asociada")]),a._v(" "),n("p",[a._v("A través del atributo key (del elemento operation) se puede asociar la tecla Enter a una\noperación. Si definimos una operación con el valor enter en el atributo key, durante la\nejecución de la página al apretar la tecla Enter obtenemos el mismo efecto que al hacer clic\nsobre el botón de la operación.")]),a._v(" "),n("h2",{attrs:{id:"definiendo-si-esta-visible-y-habilitada-en-tiempo-de-ejecucion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#definiendo-si-esta-visible-y-habilitada-en-tiempo-de-ejecucion"}},[a._v("#")]),a._v(" Definiendo si está Visible y Habilitada en Tiempo de Ejecución")]),a._v(" "),n("p",[a._v("El mecanismo es igual al que se comentó en el elemento field. Ver sección 10.0 Propiedades\ndinámicas para más información.")]),a._v(" "),n("h2",{attrs:{id:"nombre-asociado"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nombre-asociado"}},[a._v("#")]),a._v(" Nombre Asociado")]),a._v(" "),n("p",[a._v("De la misma forma que las dependencias, las operaciones tienen un nombre que se utiliza\npara generar los nombres de las subrutinas asociadas a la operación. El nombre se define\nen el atributo name. Si no se define un nombre se utiliza el valor del atributo caption para\ngenerar los nombres de las subrutinas.")]),a._v(" "),n("h2",{attrs:{id:"operaciones-que-abren-prompts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operaciones-que-abren-prompts"}},[a._v("#")]),a._v(" Operaciones que abren Prompts")]),a._v(" "),n("p",[a._v("Existe una clase particular de operaciones que permiten abrir un prompt al ejecutar la\noperación. Cuando se define una operación con el elemento operation se crea una subrutina\nque permite ejecutar código en el servidor, y dentro de esa subrutina se podría ir a otra\npágina. En cambio, las operaciones de tipo prompt permiten abrir una página por encima de\nla página actual, sin necesidad de irse de la página actual.")]),a._v(" "),n("p",[a._v("Este tipo de operaciones se pueden usar para pedir datos adicionales, realizar alguna acción\no mostrar información sin perder de vista la página actual. Se recomienda utilizar este tipo\nde operaciones únicamente en caso particulares donde permitan mejorar la usabilidad de\nuna página Web.")]),a._v(" "),n("p",[a._v("Para definir operaciones que abren prompt se utiliza el elemento prompt-operation, en lugar\nde operation. A continuación se muestra un ejemplo:")]),a._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[a._v("    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("prompt-operation")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("caption")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("Plan de pagos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("object")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("HPlanPagos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("params")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[a._v("&amp;")]),a._v("PreId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v(" \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("Esta es una operación que podría estar en una página Web donde se muestran los pagos de\nun préstamo, y al presionar el botón asociado a la operación se podría mostrar un prompt\ncon el plan de pagos del préstamo. La ventaja del uso de un prompt en esta situación es que\npermitirá ver el plan de pagos del préstamo sin perder de vista los pagos realizados.")]),a._v(" "),n("p",[a._v("Para definir un prompt se indica el objeto (un WebPanel generado con clase prompt) y la lista\nde parámetros con qué se invoca al prompt. En la lista de parámetros se pueden incluir\ntambién parámetros de salida que serán actualizados luego de cerrar el prompt.")]),a._v(" "),n("p",[a._v("A diferencia de las operaciones definidas con el elemento operation, con las operaciones de\ntipo prompt no se genera una subrutina para escribir código, ya que la operación\nsimplemente abre un prompt. Sin embargo, dentro del elemento prompt-operation se dispone\ndel atributo generateEvent para definir también una subrutina que se invoca luego de cerrar\nel prompt.")]),a._v(" "),n("p",[a._v("Al asignar el valor true al atributo generateEvent se genera una subrutina que se invoca en\nel servidor inmediatamente después de cerrar el prompt. En caso que el prompt se haya\ndefinido con botones de aceptar y cancelar (ver sección 2.8 Prompts para ingreso de datos),\nla subrutina se invoca únicamente si se acepta el prompt.")]),a._v(" "),n("p",[a._v("Dentro del elemento prompt-operation también se dispone de los atributos autoRefresh,\nconfirmation, generatePreConfirmation, key, name y validateData. Estos atributos tienen el\nmismo significado que en el elemento operation. También se dispone de los elementos hijos\nenabled y visible para controlar si la operación está visible y/o habilitada.")]),a._v(" "),n("p",[a._v("El uso de algunos de los atributos anteriores puede forzar a que luego de cerrar el prompt\nse haga una invocación dentro del servidor Web, por ejemplo, si indicamos que la operación\ntiene preconfirmación, se ejecuta una subrutina en el servidor para realizar la\npreconfirmación luego de cerrar el prompt. En resumen, se envía un pedido al servidor (luego\nde cerrar el prompt) cuando vale true al menos uno de estos atributos: autoRefresh,\nconfirmation, generateEvent, generatePreConfirmation o validateData.")])])}),[],!1,null,null,null);e.default=r.exports}}]);