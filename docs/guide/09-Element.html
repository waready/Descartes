<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reporte de Errores/Advertencias | Descartes v1.0.0</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="descartes/assets/css/0.styles.5495663d.css" as="style"><link rel="preload" href="descartes/assets/js/app.f6819d69.js" as="script"><link rel="preload" href="descartes/assets/js/2.df1312e7.js" as="script"><link rel="preload" href="descartes/assets/js/18.05e71b06.js" as="script"><link rel="prefetch" href="descartes/assets/js/10.a020de0d.js"><link rel="prefetch" href="descartes/assets/js/11.9119c14b.js"><link rel="prefetch" href="descartes/assets/js/12.26840b18.js"><link rel="prefetch" href="descartes/assets/js/13.0554c436.js"><link rel="prefetch" href="descartes/assets/js/14.4c8b9f0d.js"><link rel="prefetch" href="descartes/assets/js/15.c4dbe09e.js"><link rel="prefetch" href="descartes/assets/js/16.7e78810e.js"><link rel="prefetch" href="descartes/assets/js/17.12f1cc29.js"><link rel="prefetch" href="descartes/assets/js/19.5562166b.js"><link rel="prefetch" href="descartes/assets/js/20.1cbf9aa4.js"><link rel="prefetch" href="descartes/assets/js/21.d8adbe58.js"><link rel="prefetch" href="descartes/assets/js/22.93f02912.js"><link rel="prefetch" href="descartes/assets/js/23.9f047285.js"><link rel="prefetch" href="descartes/assets/js/24.a3890bf5.js"><link rel="prefetch" href="descartes/assets/js/25.5a6672e3.js"><link rel="prefetch" href="descartes/assets/js/26.1147f666.js"><link rel="prefetch" href="descartes/assets/js/27.6a8edf23.js"><link rel="prefetch" href="descartes/assets/js/3.791571ac.js"><link rel="prefetch" href="descartes/assets/js/4.5ed48d80.js"><link rel="prefetch" href="descartes/assets/js/5.bc1f3e9d.js"><link rel="prefetch" href="descartes/assets/js/6.b5c04817.js"><link rel="prefetch" href="descartes/assets/js/7.9cddbfa4.js"><link rel="prefetch" href="descartes/assets/js/8.360c2797.js"><link rel="prefetch" href="descartes/assets/js/9.287f3d62.js">
    <link rel="stylesheet" href="descartes/assets/css/0.styles.5495663d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/descartes/" class="home-link router-link-active"><!----> <span class="site-name">Descartes v1.0.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/descartes/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/descartes/config/" class="nav-link">
  Config
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/descartes/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/descartes/config/" class="nav-link">
  Config
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/descartes/guide/" aria-current="page" class="sidebar-link">Introduccion</a></li><li><a href="/descartes/guide/02-Element.html" class="sidebar-link">Elemento WEB-UI</a></li><li><a href="/descartes/guide/03-Element.html" class="sidebar-link">Componentes Básicos de un Formulario</a></li><li><a href="/descartes/guide/04-Element.html" class="sidebar-link">Operaciones</a></li><li><a href="/descartes/guide/05-Element.html" class="sidebar-link">Grillas</a></li><li><a href="/descartes/guide/06-Element.html" class="sidebar-link">Datos Ocultos</a></li><li><a href="/descartes/guide/08-Element.html" class="sidebar-link">Navegación</a></li><li><a href="/descartes/guide/09-Element.html" aria-current="page" class="active sidebar-link">Reporte de Errores/Advertencias</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/descartes/guide/09-Element.html#conceptos-basicos" class="sidebar-link">Conceptos Básicos</a></li><li class="sidebar-sub-header"><a href="/descartes/guide/09-Element.html#reporte-de-mensajes-en-el-init" class="sidebar-link">Reporte de Mensajes En El Init</a></li><li class="sidebar-sub-header"><a href="/descartes/guide/09-Element.html#identificadores-de-mensajes" class="sidebar-link">Identificadores de Mensajes</a></li></ul></li><li><a href="/descartes/guide/10-Element.html" class="sidebar-link">Propiedades Dinámicas</a></li><li><a href="/descartes/guide/11-Element.html" class="sidebar-link">Validaciones</a></li><li><a href="/descartes/guide/12-Element.html" class="sidebar-link">Agregados en la Nueva Versión de Descartes</a></li><li><a href="/descartes/guide/13-Element.html" class="sidebar-link">Anexo A -Criterios de diseño</a></li><li><a href="/descartes/guide/14-Element.html" class="sidebar-link">Anexo B -Definir Repositorio con HFRConfFilRep</a></li><li><a href="/descartes/guide/15-Element.html" class="sidebar-link">Anexo C - Descartes 5.0 en versión Pionero BTV3.1</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reporte-de-errores-advertencias"><a href="#reporte-de-errores-advertencias" class="header-anchor">#</a> Reporte de Errores/Advertencias</h1> <h2 id="conceptos-basicos"><a href="#conceptos-basicos" class="header-anchor">#</a> Conceptos Básicos</h2> <p>El mecanismo de reporte de errores/advertencias permite mostrarle mensajes al usuario
para informarle de uno o más errores ocurridos, o darle advertencias de las consecuencias
de una operación (por ejemplo, el saldo de una cuenta quedó negativo).</p> <p>Al trabajar en ambiente Web, únicamente se puede reportar los errores/advertencias dentro
de los WebPanel. Esto es contrario a otras arquitecturas, en donde podíamos reportar errores
dentro de los procedimientos. Por lo tanto, al escribir cómo implementamos una operación
también debemos escribir en el WebPanel código para reportar errores cuando el usuario
escribió algún dato mal, o cuando ocurre un error durante la ejecución de la operación, y no
podemos hacerlo desde los procedimientos.</p> <p>Cuando necesitamos hacer una modificación en la base de datos debemos hacer una
llamada a un procedimiento. Al ejecutar este procedimiento se podría producir algún error,
por ejemplo, porque no se encontró un dato en la base de datos. A pesar que el error se haya
detectado durante la ejecución del procedimiento, debemos reportarlo en el WebPanel que
invocó al procedimiento. Para lograr esto lo que podemos hacer es agregar un parámetro en
el procedimiento que indique si ocurrió un error o no, y además el mensaje de error. Por ejemplo, podemos agregar un parámetro que se llame ErrMsg, en el cual se cargara el
mensaje de error si ocurre un error, y se dejará vacío si no ocurre un error. Luego, en el
WebPanel que invoca al procedimiento debemos consultar el valor que se devolvió en este
parámetro, y si no está vacío reportar el error.</p> <p>Para reportar errores y advertencias se debe asignar el valor true al atributo
generateMsgReport (dentro del elemento web-ui). Luego, al generar la definición se crea la
subrutina “GP: Reportar mensaje”, con la cual podremos reportar errores y advertencias de
la siguiente forma:</p> <div class="language-genexus line-numbers-mode"><pre class="language-text"><code>&amp;GP_Mensaje = Udp(PFRRepMsg, &quot;Mensaje de error&quot;, &quot;E&quot;)
Do 'GP: Reportar mensaje' 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Antes de invocar a la subrutina “GP: Reportar mensaje” se debe cargar en la variable
GP_Mensaje el texto del mensaje, y el tipo (“E” error y “W” advertencia). Para cargar la
variable GP_Mensaje se debe utilizar el procedimiento FRRepMsg como se muestra en el
ejemplo. El procedimiento recibe primero el texto del mensaje, luego el tipo y devuelve el
valor que se le debe asignar a la variable GP_Mensaje.</p> <img src="descartesimg/21.png" class="center"> <p>El mecanismo de reporte de mensajes brinda la capacidad de reportar múltiples mensajes.
Es decir, en caso de tener la necesidad de reportar mas de un error, se puede invocar varias
veces a la subrutina “GP: Reportar mensaje” con los distintos mensajes.</p> <h2 id="reporte-de-mensajes-en-el-init"><a href="#reporte-de-mensajes-en-el-init" class="header-anchor">#</a> Reporte de Mensajes En El Init</h2> <p>Si se asigna el valor true al atributo generateInit (del elemento web-ui) se genera la subrutina
Init, la cual se invoca siempre antes de realizar una operación sobre la página. Un posible
uso de esta subrutina es para hacer validaciones que queremos que se realicen siempre
antes de hacer cualquier operación. Si se detecta un error, se lo puede reportar utilizando el
mecanismo de reporte de mensajes. Al reportar un error desde la subrutina Init, se
desplegará el error y no se ejecutará la operación. También podemos reportar advertencias
dentro de la subrutina Init, al reportar este tipo de mensajes se generará automáticamente
un pedido de confirmación antes de realizar la operación solicitada.</p> <h2 id="identificadores-de-mensajes"><a href="#identificadores-de-mensajes" class="header-anchor">#</a> Identificadores de Mensajes</h2> <p>Además del esquema anterior para reportar mensajes hay definido un esquema basado en
identificadores. A continuación se define cómo funciona este modelo. Dentro de la definición
del objeto se incluye un elemento llamado messages, donde se listan todos los mensajes
que se pueden reportar y se les asocia un código. Luego, para reportar un mensaje, en lugar
de indicar el texto del mensaje indicamos su código. De esta forma, no queda el texto
directamente en el código y podría ser más fácil hacer una aplicación para múltiples idiomas.</p> <p>Este mecanismo, si bien está soportado, se está considerando eliminarlo, ya que hoy día se
disponen de otras herramientas para hacer aplicaciones para múltiples idiomas. Por lo tanto,
se recomienda reportar mensajes sin utilizar identificadores, sin embargo, se muestra un
ejemplo aquí para poder entender el funcionamiento de los identificadores, en caso de
encontrar un objeto que fue desarrollado utilizando este esquema. Primero mostraremos la
sección de definiciones de mensajes:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>messages</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PaisNoExiste<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>El país {1} no existe.<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span> <span class="token attr-name">code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PaisNoExiste<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Country {1} does not exist.<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>messages</span><span class="token punctuation">&gt;</span></span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>En el ejemplo, dentro del elemento messages se definió un mensaje para indicar que un país
no existe en español y luego se definió el mismo mensaje en ingles. Aquí se puede observar
que ambos mensajes están definidos con el mismo código, pero en distintos lenguajes.
Dentro de los mensajes también se pueden incluir parámetros entre llaves (“{“ y “}”), en el
ejemplo anterior el código del país aparece como un parámetro del mensaje. Ahora veremos
el código necesario para reportar este mensaje e indicar el nombre del país:</p> <div class="language-genexus line-numbers-mode"><pre class="language-text"><code>    // Reporta el mensaje &quot;PaisNoExiste&quot; con el código de país de la
    variable &amp;PaiCod
    &amp;GP_Mensaje = Udp(PFRBldMsg1, &quot;PaisNoExiste&quot;,
    &amp;PaiCod, &quot;E&quot;) Do 'GP: Reportar mensaje' 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/descartes/guide/08-Element.html" class="prev">
        Navegación
      </a></span> <span class="next"><a href="/descartes/guide/10-Element.html">
        Propiedades Dinámicas
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="descartes/assets/js/app.f6819d69.js" defer></script><script src="descartes/assets/js/2.df1312e7.js" defer></script><script src="descartes/assets/js/18.05e71b06.js" defer></script>
  </body>
</html>
